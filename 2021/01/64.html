


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>  Scrapy框架的命令行解释 |    云淡风轻</title>
  <meta name="description" content="The future is you, the future can be expected.">
  <!-- 标签页图标 -->
  

  <!-- 图标库 -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
  <!-- 动画库 -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fushaolei/cdn-white@1.0/css/animate.css"/>
  
  <!-- css文件 -->
  
<link rel="stylesheet" href="/css/white.css">

  <!-- 代码高亮 -->
  
    
      
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.1.1/styles/github.css">

    
  
<meta name="generator" content="Hexo 5.3.0"></head>


<body>

<div class="menu-outer">
    <div class="menu-inner">
      <div class="menu-site-name  animate__animated  animate__fadeInUp">
        <a href="/">
          云淡风轻
        </a>
        
      </div>
      <div class="menu-group">
        <ul class="menu-ul">
        
          <a href="/" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              HOME
            </li>
          </a>
        
          <a href="/archives" class="nav-link">
            <li class="menu-li  animate__animated  animate__fadeInUp">
              BLOG
            </li>
          </a>
        
        
        
        <a href="/search">
          <li class="menu-li  animate__animated  animate__fadeInUp">
            <i class="ri-search-line"></i>
          </li>
        </a>
        
          <li class="menu-li animate__animated  animate__fadeInUp" id="mobile-menu">
            <i class="ri-menu-line"></i>
          </li>
        
        </ul>

      </div>

    </div>
</div>
<div id="mobile-main" class="animate__animated  animate__fadeIn">
  <div class="mobile-menu-inner">
    <div class="mobile-menu-site-name animate__animated  animate__fadeInUp">
      <a href="/">
        云淡风轻
      </a>
    </div>
    <div class="mobile-menu-group" id="mobile-close">
      <i class="ri-close-line"></i>
    </div>

  </div>

  <div class="mobile-menu-div">
  
    <a href="/" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>HOME</span>
      </div>
    </a>
  
    <a href="/archives" class="mobile-nav-link">
      <div class="mobile-menu-child animate__animated  animate__fadeInUp">
        <span>BLOG</span>
      </div>
    </a>
  
  
    <a href="/search">  
      <div class="mobile-menu-child  animate__animated  animate__fadeInUp">
        <i class="ri-search-line"></i>
      </div>
    </a>
    
  </div>


</div>

<div class="body-outer">
  <div class="body-inner">
    
<article class="post-inner">
  <div class="post-content-outer">
    <div class="post-intro">
      <div class="post-title animate__animated  animate__fadeInUp">scrapy框架的命令行解释</div>
      <div class="meta-intro animate__animated  animate__fadeInUp">1月 29 2021</div>
      
    </div>
    <div class="post-content-inner">
      <div class="post-content-inner-space">

      </div>
      <div class="post-content-main animate__animated  animate__fadeInUp">
        <!-- top型目录 -->
        
        <blockquote>
<p>Scrapy 是通过 scrapy 命令行工具进行控制的。 这里我们称之为 “Scrapy tool” 以用来和子命令进行区分。对于子命令，我们称为 “command” 或者 “Scrapy commands”。Scrapy tool 针对不同的目的提供了多个命令，每个命令支持不同的参数和选项。</p>
</blockquote>
<a id="more"></a>
<h1 id="创建爬虫项目"><a href="#创建爬虫项目" class="headerlink" title="创建爬虫项目"></a>创建爬虫项目</h1><ul>
<li><p><code>scrapy startproject 项目名</code></p>
<blockquote>
<pre><code class="shell">(venv) D:\python\爬虫学习\scrapy_spider&gt;scrapy startproject testproject
New Scrapy project &#39;testproject&#39;, using template directory &#39;d:\python\venv\lib\site-pack
ages\scrapy\templates\project&#39;, created in:
    D:\python\爬虫学习\scrapy_spider\testproject
You can start your first spider with:
    cd testproject
    scrapy genspider example example.com
</code></pre>
</blockquote>
<p>这个时候爬虫的目录结构就已经创建完成了,目录结构如下：</p>
<blockquote>
<pre><code class="shell">(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;tree /f
卷 DATADRIVE1 的文件夹 PATH 列表
卷序列号为 4A47-5EA3
D:.
│  scrapy.cfg
│
└─testproject
    │  items.py
    │  middlewares.py
    │  pipelines.py
    │  settings.py
    │  __init__.py
    │
    └─spiders
            __init__.py
</code></pre>
</blockquote>
</li>
</ul>
<p>接着我们按照提示可以生成一个spider,这里以百度作为例子,生成spider的命令格式为;</p>
<ul>
<li><p><code>scrapy genspider 爬虫名字 爬虫的网址</code></p>
<blockquote>
<pre><code class="shell">(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;scrapy genspider baidu.com www.baidu
.com
Created spider &#39;baidu.com&#39; using template &#39;basic&#39; in module:
  testproject.spiders.baidu_com
</code></pre>
</blockquote>
</li>
<li><p><code>scrapy crawl 爬虫名字</code>      开始运行爬虫</p>
</li>
</ul>
<h1 id="关于命令详细使用"><a href="#关于命令详细使用" class="headerlink" title="关于命令详细使用"></a>关于命令详细使用</h1><p>这里的命令分为全局的命令和项目的命令，全局的命令表示可以在任何地方使用，而项目的命令只能在项目目录下使用</p>
<ul>
<li><p>全局命令</p>
<ul>
<li><p>startproject</p>
<pre><code class="shell"># 创建项目
scrapy startprojects 项目名
</code></pre>
</li>
<li><p>genspider</p>
<pre><code class="shell"># 列出所有的模版
scrapy genspider -l
# 运行结果
(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;scrapy genspider -l
Available templates:
  basic
  crawl
  csvfeed
  xmlfeed

# 当我们创建的时候可以指定模板，不指定默认用的basic,如果想要指定模板则通过
scrapy genspider -t 模板名
# 生成一个项目crawl模版
scrapy genspider -t crawl zhihu wwww.zhihu.com
</code></pre>
</li>
<li><p>settings</p>
<pre><code class="shell"># 获取帮助信息
scrapy settings -h 
# 获取settings.py中的配置
scrapy settings --get 配置名
# 例子获取settings.py中的MONGO_URL
(venv) D:\python\爬虫学习\scrapy_spider\quotetutorial&gt;scrapy settings --get MONGO_URL
localhost
</code></pre>
</li>
<li><p>runspider</p>
<pre><code class="shell"># 运行爬虫
scrapy runspider 爬虫名
</code></pre>
</li>
<li><p>shell</p>
<pre><code class="shell"># 进入交互模式
scrapy shell 爬虫网址
# 例子
(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;scrapy shell http://baidu.com

&gt; (referer: None)
[s] Available Scrapy objects:
[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)
[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x000001D3C1D5E1F0&gt;
[s]   item       &#123;&#125;
[s]   request    &lt;GET http://baidu.com&gt;
[s]   response   &lt;200 http://www.baidu.com/&gt;
[s]   settings   &lt;scrapy.settings.Settings object at 0x000001D3C1D5E100&gt;
[s]   spider     &lt;DefaultSpider &#39;default&#39; at 0x1d3c2218e80&gt;
[s] Useful shortcuts:
[s]   fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redire
cts are followed)
[s]   fetch(req)                  Fetch a scrapy.Request and update local objects
[s]   shelp()           Shell help (print this help)
[s]   view(response)    View response in a browser
&gt;&gt;&gt; scrapy
&lt;module &#39;scrapy&#39; from &#39;d:\\python\\venv\\lib\\site-packages\\scrapy\\__init__.py&#39;&gt;
&gt;&gt;&gt; exit()
</code></pre>
</li>
<li><p>fetch</p>
<blockquote>
<p>使用 Scrapy 下载器(downloader)下载给定的 URL，并将获取到的内容送到标准输出。<br>该命令以 spider 下载页面的方式获取页面。例如，如果 spider 有 USER_AGENT 属性修改了 User Agent，该命令将会使用该属性。<br>因此，您可以使用该命令来查看 spider 如何获取某个特定页面。<br>该命令如果非项目中运行则会使用默认 Scrapy downloader 设定。</p>
</blockquote>
<pre><code class="shell"># 输出日志及网页源代码
scrapy fetch 爬虫网址
# 不显示运行日志
scrapy fetch --nolog 爬虫网址
# 打印响应头信息
scrapy fetch --headers 爬虫网址
# 不做跳转
scrapy fetch --no-redirect 爬虫网址
</code></pre>
</li>
<li><p>view</p>
<blockquote>
<p>在浏览器中打开给定的 URL，并以 Scrapy spider 获取到的形式展现。 有些时候 spider 获取到的页面和普通用户看到的并不相同。 因此该命令可以用来检查 spider 所获取到的页面，并确认这是您所期望的。</p>
</blockquote>
<pre><code class="shell"># view 从浏览器中打开网页
scrapy view http://www.taobao.com
</code></pre>
<p>因为现在很多网站的数据都是通过ajax请求来加载的，这个时候直接通过requests请求是无法获取我们想要的数据，所以这个view命令可以帮助我们很好的判断</p>
</li>
<li><p>version</p>
<pre><code># 查看版本信息，并查看依赖库的信息
scrapy version
scrapy version -v

# 运行结果
(venv) D:\python\爬虫学习\scrapy_spider\quotetutorial\quotetutorial&gt;scrapy version
Scrapy 2.4.1

(venv) D:\python\爬虫学习\scrapy_spider\quotetutorial\quotetutorial&gt;scrapy version -v
Scrapy       : 2.4.1
lxml         : 4.5.0.0
libxml2      : 2.9.5
cssselect    : 1.1.0
parsel       : 1.6.0
w3lib        : 1.22.0
Twisted      : 20.3.0
Python       : 3.8.6 (tags/v3.8.6:db45529, Sep 23 2020, 15:52:53) [MSC v.1927 64 bit (AM
D64)]
pyOpenSSL    : 20.0.1 (OpenSSL 1.1.1i  8 Dec 2020)
cryptography : 3.3.1
Platform     : Windows-10-10.0.17763-SP0
</code></pre>
</li>
</ul>
</li>
<li><p>项目命令</p>
<ul>
<li><p>crawl</p>
<blockquote>
<p>这个是用去启动spider爬虫格式为：<br><code>scrapy crawl 爬虫名字</code><br>这里需要注意这里的爬虫名字和通过scrapy genspider 生成爬虫的名字是一致的</p>
</blockquote>
</li>
<li><p>check</p>
<blockquote>
<p>用于检查代码是否有错误</p>
<p><code>scrapy check</code></p>
<pre><code class="shell">(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;scrapy check

----------------------------------------------------------------------
Ran 0 contracts in 0.001s

OK
</code></pre>
</blockquote>
</li>
<li><p>list</p>
<blockquote>
<p>列出所有可用的爬虫</p>
<p><code>scrapy list</code></p>
<pre><code class="shell">(venv) D:\python\爬虫学习\scrapy_spider\testproject&gt;scrapy list
baidu.com
zhihu
</code></pre>
</blockquote>
</li>
<li><p>edit</p>
<blockquote>
<p>edit 在命令行下编辑spider ### 不建议运行<br><code>scrapy edit 爬虫名</code></p>
</blockquote>
</li>
<li><p>parse</p>
<blockquote>
<p>获取给定的 URL 并使用相应的 spider 分析处理。如果您提供<code>--callback</code> 选项，则使用 spider 的该方法处理，否则使用 <code>parse</code>。</p>
<p><code>scrapy parse 爬虫网址 [options]</code></p>
<p>支持的选项：</p>
<ul>
<li><code>--spider=SPIDER</code>：跳过自动检测 spider 并强制使用特定的 spider</li>
<li><code>--a NAME=VALUE</code>：设置 spider 的参数(可能被重复)</li>
<li><code>--callback or -c</code>：spider 中用于解析返回(response)的回调函数</li>
<li><code>--pipelines</code>：在 pipeline 中处理 item</li>
<li><code>--rules or -r</code>：使用 CrawlSpider 规则来发现用来解析返回(response)的回调函数</li>
<li><code>--noitems</code>：不显示爬取到的 item</li>
<li><code>--nolinks</code>：不显示提取到的链接</li>
<li><code>--nocolour</code>：避免使用 pygments 对输出着色</li>
<li><code>--depth or -d</code>：指定跟进链接请求的层次数(默认：1)</li>
<li><code>--verbose or -v</code>：显示每个请求的详细信息</li>
</ul>
</blockquote>
</li>
<li><p>bench</p>
<blockquote>
<p>运行 benchmark 测试。Benchmarking。</p>
<p><code>scrapy bench</code></p>
</blockquote>
</li>
</ul>
</li>
</ul>

        <!-- 分类文章 -->
        
      </div>
      <div class="post-content-inner-space">
        
          <div class="space-toc-main animate__animated  animate__fadeInUp">
            
           </div>
        
      </div>
   </div>
    <!-- 评论 -->
    
    <div class="bottom-comments-outer">
      <div class="bottom-comments-inner">
        <!-- valine -->
        
          <section id="comments" class="comments" style="margin-top: 150px;">
            <style>
              .comments{background:#fff}
              @media screen and (max-width:900px){.comments{margin:auto;padding:10px;background:#fff}}
            </style>
            <div id="vcomment" class="comment"></div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
    var notify = 'true' == true ? true : false;
    var verify = 'true' == true ? true : false;
    new Valine({
        av: AV,
        el: '#vcomment',
        notify: notify,
        app_id: "oLziw6ntaHtCC9A0HLYYu5OE-gzGzoHsz",
        app_key: "KjHsec1b3kguAMPQ7io7JlFs",
        placeholder: "留下你来过的痕迹~",
        avatar:"robohash",
    });
</script>

          </section>
        
        <!-- Gitalk -->
        
        <!-- livere -->
        
        </div>
      </div>
    
  </div>
</article>
  </div>
</div>



<!-- 如果是home模式的话，不在首页就显示footer，如果不是home模式的话 所有都显示footer -->

  <div class="footer-outer animate__animated  animate__fadeInUp">
    <div class="footer-inner">
    <div class="footer-text">
    <p>© 2021 云淡风轻|<a target="_blank" rel="noopener" href="https://www.beian.miit.gov.cn/">冀ICP备19031443号</a><br><a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank"><img src="https://imgs.521daigua.cn/%E6%A0%B7%E5%BC%8F%E5%9B%BE.7cf927c.png" width="300px" height="20px"></a></p>

    </div>
    <div class="footer-contact">
    <ul class="footer-ul">
        
        <li class="footer-li">
            <a href="https://github.com/ne-21" target="_blank">
                <i class="ri-github-line"></i>
            </a>
        </li>
        
        <li class="footer-li">
            <a href="mailto:nawlgzs@gmail.com" target="_blank">
                <i class="ri-mail-line"></i>
            </a>
        </li>
        
    </ul>
    </div>
    </div>
	<script>
	var _hmt = _hmt || [];
	(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?46c8202ccbfe91fef8f7d5fddc0ce94a";
	var s = document.getElementsByTagName("script")[0]; 
	s.parentNode.insertBefore(hm, s);
	})();
	</script>
</div>






<script src="/js/white.js"></script>



    
      
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.1/build/highlight.min.js"></script>

      <script>hljs.initHighlightingOnLoad();</script>
    

</body>
</html>
